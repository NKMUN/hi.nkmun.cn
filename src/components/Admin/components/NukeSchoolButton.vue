<template>
  <div>

    <el-tooltip
      effect="dark"
      placement="top"
      content="ðŸ˜¡ è®©è¿™æ‰€å­¦æ ¡çž¬é—´çˆ†ç‚¸ï¼ å±é™ºä»˜ãã§ã™ï¼"
    >
      <el-button
        type="danger"
        :loading="busy"
        @click="confirmNuke"
      >
        <icon class="el-icon-" name="exclamation-triangle" style="vertical-align: bottom;" />
        <span>{{ busy ? 'çˆ†ç‚¸ä¸­â€¦â€¦' : 'ä¸€é”®é€€ä¼š' }}</span>
      </el-button>
    </el-tooltip>

    <SeriousConfirm ref="serious" />

  </div>
</template>

<script>
import { Button, Tooltip } from 'element-ui'
import SeriousConfirm from '../../SeriousConfirm'

import Icon from 'vue-awesome/components/Icon'
import 'vue-awesome/icons/exclamation-triangle'

export default {
  name: 'NukeSchool',
  components: {
    [Button.name]: Button,
    [Tooltip.name]: Tooltip,
    SeriousConfirm,
    Icon
  },
  props: {
    disabled: { type: Boolean, default: false },
    busy: { type: Boolean, default: false },
    repeat: { type: String, default: '' }
  },
  methods: {
    confirmNuke() {
      this.$refs.serious.confirm('å½»åº•é”€æ¯è¿™æ‰€å­¦æ ¡ã€‚\nå°†é‡Šæ”¾å…¶åé¢ã€é…’åº—ã€‚è¯·ç¡®è®¤ï¼', this.repeat)
      .then( confirmed => confirmed ? this.$emit('click') : null )
    }
  }
}
</script>

<style lang="stylus" scoped>
div
  text-align: center
</style>
